<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dialog 浮動視窗測試器</title>
<style>
  :root{ --bg:#0b1220; --ink:#e6edf3; }
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
  .wrap{max-width:720px;margin:24px auto;padding:0 16px}
  .card{background:#111827;border:1px solid #374151;border-radius:12px;padding:16px}
  .row{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-top:12px}
  .btn{background:#ef4444;color:#fff;border:0;border-radius:10px;cursor:pointer;min-width:120px;height:36px;line-height:36px;padding:0 14px}

  /* ===== Dialog 置中與尺寸 ===== */
  dialog{
    position:fixed;
    top:15vh;                /* JS 僅更新 top，水平靠 transform 置中 */
    left:50%;
    transform:translateX(-50%);
    width:min(92vw, 380px);
    margin:0;
    padding:0;
    background:#0f172a;
    color:#e6edf3;

    /* 取消瀏覽器預設線條與陰影 */
    border:none; outline:none; box-shadow:none;
  }

  /* ===== 測試：把候選線條各自塗色 ===== */
  /* 1) dialog 外框（紅）→ 如果你仍看到紅線，來源在這 */
  dialog{ box-shadow: 0 0 0 2px #ff2b2b; }

  /* 2) 標題底線（藍） */
  .dlg-title{ font-weight:700; margin:0 0 8px 0; padding-bottom:6px; border-bottom:2px solid #2b7bff; }

  /* 3) 內容外框（綠） */
  .dlg-body{ box-sizing:border-box; padding:14px; border:2px solid #2bff7b; border-radius:12px; }

  /* 4) 按鈕區頂線（洋紅） */
  .dlg-row{ display:flex; gap:8px; justify-content:flex-end; margin-top:12px; padding-top:10px; border-top:2px solid #ff2be6; }

  /* 表單外觀 */
  .fld{display:flex;flex-direction:column;gap:8px}
  .fld label{font-size:12px;color:#94a3b8;margin-left:4px}
  .fld input{
    padding:10px 16px;border-radius:10px;border:1px solid #334155;
    background:#0b1220;color:#e6edf3;
  }
  .fld input::placeholder{color:#9ca3af;opacity:1;font-size:14px}

  .dlg-foot{display:flex;gap:8px;justify-content:flex-end}
  .btn-sec{background:#374151}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h2>浮動視窗線條來源測試</h2>
      <ol>
        <li>按下「送出刪除」會開啟 <code>&lt;dialog&gt;</code>。</li>
        <li>我把候選線條各自染色：紅=dialog外框、藍=標題底線、綠=內容外框、洋紅=按鈕區頂線。</li>
        <li>你看到哪條，就是哪個區塊在畫線。</li>
      </ol>
      <div class="row">
        <button id="open" class="btn" type="button">送出刪除</button>
        <button id="close" class="btn btn-sec" type="button">關閉視窗</button>
      </div>
    </div>
  </div>

  <!-- 測試用 Dialog -->
  <dialog id="confirmDlg">
    <div class="dlg-body">
      <div class="dlg-title">確認刪除</div>
      <div class="fld">
        <label for="adminId">管理員代碼（5 碼）</label>
        <input id="adminId" type="text" inputmode="latin" maxlength="5" placeholder="如：AB123">
        <label for="confirmInput">確認字串</label>
        <input id="confirmInput" type="text" placeholder="輸入 admin">
      </div>
      <div class="dlg-row">
        <button id="cancel" class="btn btn-sec" type="button">取消</button>
        <button id="ok" class="btn" type="button">確定刪除</button>
      </div>
    </div>
  </dialog>

<script>
const dlg = document.getElementById('confirmDlg');
const adminIdEl = document.getElementById('adminId');

/* 只控制垂直位置；左右置中交給 CSS */
function placeDialogTop(d){
  const vv = window.visualViewport;
  if (!vv || !d.open) return;
  const top = Math.max(12, vv.offsetTop + vv.height * 0.15);
  d.style.top = `${top}px`;
}
if (window.visualViewport){
  visualViewport.addEventListener('resize', ()=> placeDialogTop(dlg));
  visualViewport.addEventListener('scroll', ()=> placeDialogTop(dlg));
}

document.getElementById('open').addEventListener('click', ()=>{
  dlg.showModal();
  placeDialogTop(dlg);
  adminIdEl.focus({preventScroll:true});
});
document.getElementById('close').addEventListener('click', ()=> dlg.close());
document.getElementById('cancel').addEventListener('click', ()=> dlg.close());
document.getElementById('ok').addEventListener('click', ()=> dlg.close());
</script>
</body>
</html>