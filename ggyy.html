<!doctype html><meta charset="utf-8">
<title>QRScanner Test</title>
<button id="start">開始掃描</button>
<button id="stop">停止</button>
<video id="cam" playsinline muted style="width:100%;max-width:480px;display:block;margin-top:8px"></video>
<pre id="msg" style="color:#0ff"></pre>
<script type="module">
import { QRScanner } from './js/QRScanner.js';
const msg = s=>document.getElementById('msg').textContent = s;

QRScanner.mount({
  videoEl:"#cam",
  formats:["qr","code39"],
  onFrame:i=>{ if(i&&i.w) msg(`偵測中… ${i.w}x${i.h}`); },
  onOk:txt=>{ msg('掃到：'+txt); QRScanner.stop(); },
  onError:err=>{ msg('錯誤：'+err); }
});

document.getElementById('start').onclick = ()=>{ try{ QRScanner.start(); }catch(e){ msg('start失敗：'+e); } };
document.getElementById('stop').onclick  = ()=>{ try{ QRScanner.stop(); } catch(e){ msg('stop失敗：'+e); } };
</script>